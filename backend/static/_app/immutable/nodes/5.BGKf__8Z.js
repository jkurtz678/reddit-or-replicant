import"../chunks/DsnmJJEf.js";import"../chunks/Czs3uoK7.js";import{o as Ae,e as s,s as j}from"../chunks/DjEdHHdZ.js";import{p as Fe,f as _,e as O,a as p,b as Te,s as d,c as r,d as n,m as R,r as a,g as e,i as Le,n as $e,t as U,j as Ie}from"../chunks/CSL_G-ra.js";import{i as L}from"../chunks/CZ6qWho8.js";import{e as Me,i as Ne}from"../chunks/D0dqcScj.js";import{r as Oe}from"../chunks/BOe3PIrR.js";import{s as q,a as Ue,b as ze}from"../chunks/DFvihwEc.js";import{a as ne,b as Ee}from"../chunks/C6oE0YpH.js";import{i as Be}from"../chunks/D8J5l3fY.js";import{g as H}from"../chunks/CI6f0tGy.js";var Ce=_('<div class="text-center"><div class="animate-pulse text-gray-300">Loading posts...</div></div>'),Ge=_('<button class="px-3 py-1 text-white rounded text-sm transition-all duration-200 hover:scale-105 cursor-pointer" style="background: linear-gradient(135deg, var(--replicant-primary), var(--replicant-secondary)); border: 1px solid var(--replicant-border);">Begin Test</button> <button class="px-3 py-1 text-white rounded text-sm transition-all duration-200 hover:scale-105 cursor-pointer" style="background: linear-gradient(135deg, #7f1d1d, #dc2626); border: 1px solid rgba(220, 38, 38, 0.3);">Delete</button>',1),Je=_('<span class="px-2 py-1 text-xs rounded text-amber-200 bg-amber-900/30 border border-amber-700/50">Deleted</span> <button class="px-3 py-1 text-white rounded text-sm transition-all duration-200 hover:scale-105 cursor-pointer" style="background: linear-gradient(135deg, #166534, #16a34a); border: 1px solid rgba(34, 197, 94, 0.3);">Restore</button>',1),Ve=_('<div style="background: rgba(17, 17, 20, 0.85); backdrop-filter: blur(10px);"><div class="flex justify-between items-center mb-3"><div class="flex-1"><div class="flex items-center gap-2 mb-2"><h3 class="font-medium text-white text-lg"> </h3></div> <div class="text-sm text-gray-400 mb-2"><span style="color: #00d4ff;"> </span> </div> <div class="text-xs text-gray-500"> <!></div></div> <div class="ml-4 flex gap-2 items-center"><!></div></div></div>'),We=_('<div class="max-w-4xl mx-auto"><div class="flex justify-between items-center mb-6"><h2 class="text-xl font-semibold text-white">Manage Posts</h2> <button class="px-4 py-2 text-white rounded transition-all duration-200 cursor-pointer hover:scale-105" style="background: linear-gradient(135deg, var(--replicant-primary), var(--replicant-secondary)); border: 1px solid var(--replicant-border);">+ Add New Post</button></div> <div class="grid gap-4"></div></div>'),Ye=_('<div class="text-center text-gray-400"><p class="mb-4">No posts yet. Add your first Reddit post!</p> <button class="px-6 py-3 text-white rounded transition-all duration-200 cursor-pointer hover:scale-105" style="background: linear-gradient(135deg, var(--replicant-primary), var(--replicant-secondary)); border: 1px solid var(--replicant-border);">+ Add Your First Post</button></div>'),qe=_('<div class="mt-3 text-amber-400 text-sm"> </div>'),He=_(`<div style="background: rgba(0, 0, 0, 0.3); backdrop-filter: blur(2px);"><div style="background: rgba(17, 17, 20, 0.95); backdrop-filter: blur(10px);"><div class="flex justify-between items-center mb-4"><h2 class="text-lg font-semibold text-white">Submit New Reddit Post</h2> <button class="text-gray-400 hover:text-white transition-colors">✕</button></div> <div class="flex gap-3"><input placeholder="https://www.reddit.com/r/subreddit/comments/xyz/title/" class="flex-1 px-3 py-2 rounded bg-gray-800 border border-gray-600 text-white placeholder-gray-400 focus:border-blue-400 focus:outline-none"/> <button class="px-4 py-2 text-white rounded transition-all duration-200 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed hover:scale-105" style="background: linear-gradient(135deg, var(--replicant-primary), var(--replicant-secondary)); border: 1px solid var(--replicant-border);"> </button></div> <!> <div class="mt-3 text-gray-400 text-sm">Paste any Reddit post URL. We'll fetch the comments, generate AI comments, and create a guessing game.</div></div></div>`),Ke=_('<div class="min-h-screen text-gray-100" style="background: linear-gradient(180deg, #0a0a0b 0%, #111013 100%)"><div class="fixed top-0 left-0 right-0 z-50 border-b border-gray-700" style="background: rgba(17, 17, 20, 0.95); backdrop-filter: blur(10px);"><div class="max-w-4xl mx-auto px-4 py-3"><div class="flex items-center justify-between"><a href="/" class="text-lg font-bold cursor-pointer hover:text-blue-300 transition-colors" style="color: #f3f4f6; text-shadow: 0 0 8px rgba(0, 212, 255, 0.1);">Reddit or <span class="glitch" data-text="Replicant">Replicant</span>?</a> <div class="flex items-center gap-4"><span class="text-sm text-amber-400">Admin Mode</span> <button class="px-3 py-1 text-white rounded text-sm transition-all duration-200 cursor-pointer hover:scale-105" style="background: linear-gradient(135deg, #374151, #6b7280); border: 1px solid rgba(156, 163, 175, 0.3);">Logout</button></div></div></div></div> <div class="pt-16"><div class="container mx-auto p-8"><!></div></div></div> <!>',1);function dt(ce,K){Fe(K,!1);let z=R([]),E=R(!0),$=R(!1),I=R(""),A=R(""),B=R(!1),h=R(!1);Ae(async()=>{if(!ne.isAdmin()){H("/admin");return}await M()});function Q(){n(B,!0),setTimeout(()=>n(h,!0),10)}function C(){n(h,!1),setTimeout(()=>n(B,!1),300)}async function M(){try{n(E,!0);const t=await fetch("/api/posts?include_deleted=true");if(!t.ok)throw new Error("Failed to fetch posts");const o=await t.json();n(z,o.posts||[])}catch(t){n(I,"Failed to load posts"),console.error(t)}finally{n(E,!1)}}async function X(){if(e(A).trim())try{n($,!0),n(I,"");const t=await fetch("/api/posts/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e(A).trim()})});if(!t.ok){const m=await t.json();throw new Error(m.detail||"Failed to submit URL")}const o=await t.json();console.log("Submitted successfully:",o),n(A,""),C(),await M()}catch(t){n(I,t.message),console.error(t)}finally{n($,!1)}}function ve(t){H(`/test?post=${t}`)}async function ue(t){if(confirm("Are you sure you want to delete this post? It can be restored later."))try{const o=await fetch(`/api/admin/posts/${t}/delete`,{method:"POST"});if(o.ok)await M();else{const m=await o.json();alert(`Failed to delete post: ${m.detail}`)}}catch(o){console.error("Delete failed:",o),alert("Failed to delete post. Please try again.")}}async function be(t){try{const o=await fetch(`/api/admin/posts/${t}/restore`,{method:"POST"});if(o.ok)await M();else{const m=await o.json();alert(`Failed to restore post: ${m.detail}`)}}catch(o){console.error("Restore failed:",o),alert("Failed to restore post. Please try again.")}}function pe(){ne.logout(),H("/")}Be();var Z=Ke(),G=O(Z),J=r(G),ee=r(J),te=r(ee),ae=d(r(te),2),me=d(r(ae),2);a(ae),a(te),a(ee),a(J);var re=d(J,2),oe=r(re),xe=r(oe);{var ge=t=>{var o=Ce();p(t,o)},fe=t=>{var o=Le(),m=O(o);{var F=x=>{var f=We(),b=r(f),c=d(r(b),2);a(b);var y=d(b,2);Me(y,5,()=>e(z),Ne,(k,i)=>{var T=Ve();let l;var w=r(T),S=r(w),V=r(S),se=r(V),he=r(se,!0);a(se),a(V);var W=d(V,2),Y=r(W),we=r(Y);a(Y);var ke=d(Y);a(W);var ie=d(W,2),le=r(ie),Se=d(le);{var Pe=v=>{var g=Ie();U(u=>j(g,`• Deleted ${u??""}`),[()=>new Date(e(i).deleted_at).toLocaleDateString()]),p(v,g)};L(Se,v=>{e(i).is_deleted&&e(i).deleted_at&&v(Pe)})}a(ie),a(S);var de=d(S,2),De=r(de);{var je=v=>{var g=Ge(),u=O(g),P=d(u,2);s("click",u,()=>ve(e(i).id)),s("mouseenter",u,D=>D.target.style.boxShadow="0 0 15px var(--replicant-glow)"),s("mouseleave",u,D=>D.target.style.boxShadow=""),s("click",P,()=>ue(e(i).id)),s("mouseenter",P,D=>D.target.style.boxShadow="0 0 15px rgba(220, 38, 38, 0.4)"),s("mouseleave",P,D=>D.target.style.boxShadow=""),p(v,g)},Re=v=>{var g=Je(),u=d(O(g),2);s("click",u,()=>be(e(i).id)),s("mouseenter",u,P=>P.target.style.boxShadow="0 0 15px rgba(34, 197, 94, 0.4)"),s("mouseleave",u,P=>P.target.style.boxShadow=""),p(v,g)};L(De,v=>{e(i).is_deleted?v(Re,!1):v(je)})}a(de),a(w),a(T),U((v,g,u)=>{l=q(T,1,"border border-gray-700 rounded-lg p-6 transition-all duration-200",null,l,v),j(he,e(i).title),j(we,`r/${e(i).subreddit??""}`),j(ke,` • ${e(i).total_count??""} comments (${e(i).ai_count??""} AI, ${e(i).total_count-e(i).ai_count} real)
										• ${g??""}% AI`),j(le,`Added ${u??""} `)},[()=>({"opacity-50":e(i).is_deleted,"hover:border-blue-400":!e(i).is_deleted,"hover:border-amber-400":e(i).is_deleted}),()=>Math.round(e(i).ai_count/e(i).total_count*100),()=>new Date(e(i).created_at).toLocaleDateString()]),p(k,T)}),a(y),a(f),s("click",c,Q),s("mouseenter",c,k=>k.target.style.boxShadow="0 0 15px var(--replicant-glow)"),s("mouseleave",c,k=>k.target.style.boxShadow=""),p(x,f)},N=x=>{var f=Ye(),b=d(r(f),2);a(f),s("click",b,Q),s("mouseenter",b,c=>c.target.style.boxShadow="0 0 15px var(--replicant-glow)"),s("mouseleave",b,c=>c.target.style.boxShadow=""),p(x,f)};L(m,x=>{e(z).length>0?x(F):x(N,!1)},!0)}p(t,o)};L(xe,t=>{e(E)?t(ge):t(fe,!1)})}a(oe),a(re),a(G);var ye=d(G,2);{var _e=t=>{var o=He();let m;var F=r(o);let N;var x=r(F),f=d(r(x),2);a(x);var b=d(x,2),c=r(b);Oe(c);var y=d(c,2),k=r(y,!0);a(y),a(b);var i=d(b,2);{var T=l=>{var w=qe(),S=r(w,!0);a(w),U(()=>j(S,e(I))),p(l,w)};L(i,l=>{e(I)&&l(T)})}$e(2),a(F),a(o),U((l,w,S)=>{m=q(o,1,"fixed inset-0 flex items-center justify-center z-50 transition-opacity duration-300",null,m,l),N=q(F,1,"border border-gray-700 rounded-lg p-6 m-4 max-w-2xl w-full transform transition-all duration-300",null,N,w),c.disabled=e($),y.disabled=S,j(k,e($)?"Processing...":"Submit")},[()=>({"opacity-0":!e(h),"opacity-100":e(h)}),()=>({"scale-95":!e(h),"opacity-0":!e(h),"scale-100":e(h),"opacity-100":e(h)}),()=>e($)||!e(A).trim()]),s("click",f,C),Ee(c,()=>e(A),l=>n(A,l)),s("keydown",c,l=>l.key==="Enter"&&X()),s("click",y,X),s("mouseenter",y,l=>l.target.style.boxShadow="0 0 15px var(--replicant-glow)"),s("mouseleave",y,l=>l.target.style.boxShadow=""),s("click",F,Ue(function(l){ze.call(this,K,l)})),s("click",o,C),p(t,o)};L(ye,t=>{e(B)&&t(_e)})}s("click",me,pe),p(ce,Z),Te()}export{dt as component};
