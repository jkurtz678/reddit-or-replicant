import{aj as u,ak as v,ad as f,al as m,u as _,C as r,am as k}from"./CSL_G-ra.js";function h(e,a,l=a){var o=new WeakSet;u(e,"input",async n=>{var t=n?e.defaultValue:e.value;if(t=s(e)?c(t):t,l(t),r!==null&&o.add(r),await v(),t!==(t=a())){var d=e.selectionStart,i=e.selectionEnd;e.value=t??"",i!==null&&(e.selectionStart=d,e.selectionEnd=Math.min(i,e.value.length))}}),(_&&e.defaultValue!==e.value||f(a)==null&&e.value)&&(l(s(e)?c(e.value):e.value),r!==null&&o.add(r)),m(()=>{var n=a();if(e===document.activeElement){var t=k??r;if(o.has(t))return}s(e)&&n===c(e.value)||e.type==="date"&&!n&&!e.value||n!==e.value&&(e.value=n??"")})}function s(e){var a=e.type;return a==="number"||a==="range"}function c(e){return e===""?null:+e}const y={async login(e){try{const a=await fetch("/api/admin/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e})});if(a.ok){const l=await a.json();return localStorage.setItem("admin_token",l.token),!0}return!1}catch(a){return console.error("Admin login failed:",a),!1}},logout(){localStorage.removeItem("admin_token")},isAdmin(){return localStorage.getItem("admin_token")==="admin_authenticated"},getToken(){return localStorage.getItem("admin_token")}};export{y as a,h as b};
