@import "tailwindcss";
@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@300;400;500;600;700&display=swap');

body {
	background-color: #0a0a0b;
	margin: 0;
	padding: 0;
	font-family: 'JetBrains Mono', 'Courier New', monospace;
	letter-spacing: 0.02em;
}

.content-text {
	font-family: 'IBM Plex Sans', system-ui, sans-serif;
	letter-spacing: 0.005em;
	font-weight: 400;
}

/* Page transition animations */
@media (prefers-reduced-motion: no-preference) {
	/* View Transition API support for modern browsers */
	::view-transition-old(root),
	::view-transition-new(root) {
		animation-duration: 300ms;
		animation-timing-function: ease-in-out;
	}

	::view-transition-old(root) {
		animation-name: fade-out;
	}

	::view-transition-new(root) {
		animation-name: fade-in;
	}

	@keyframes fade-out {
		from { opacity: 1; }
		to { opacity: 0; }
	}

	@keyframes fade-in {
		from { opacity: 0; }
		to { opacity: 1; }
	}
}

/* Glitch effect for Replicant username only */
.glitch:not(.content-text) {
	position: relative;
	color: #ff8c42;
	filter: drop-shadow(0 1px 3px);
}

/* Glitch effect for comment text - visual effects only, no color change */
.content-text.glitch {
	position: relative;
	filter: drop-shadow(0 1px 3px);
	/* Keep original color until glitching class is added */
}


.glitch::before,
.glitch::after {
	content: attr(data-text);
	position: absolute;
	width: 110%;
	z-index: -1;
}

.glitch::before {
	top: 1px;
	left: 2px;
	color: #ff8c42;
	animation: glitch-paths 4s step-end infinite, glitch-opacity 4s step-end infinite,
		glitch-font 5s step-end infinite, glitch-movement 6s step-end infinite;
}

.glitch::after {
	top: 1px;
	left: -2px;
	color: #1bc7fb;
	animation: glitch-paths 4s step-end infinite, glitch-opacity 4s step-end infinite,
		glitch-font 4.5s step-end infinite, glitch-movement 5s step-end infinite;
}

@keyframes glitch-paths {
	0% {
		clip-path: polygon(
			0% 43%, 83% 43%, 83% 22%, 23% 22%, 23% 24%, 91% 24%, 91% 26%, 18% 26%, 
			18% 83%, 29% 83%, 29% 17%, 41% 17%, 41% 39%, 18% 39%, 18% 82%, 54% 82%, 
			54% 88%, 19% 88%, 19% 4%, 39% 4%, 39% 14%, 76% 14%, 76% 52%, 23% 52%, 
			23% 35%, 19% 35%, 19% 8%, 36% 8%, 36% 31%, 73% 31%, 73% 16%, 1% 16%, 
			1% 56%, 50% 56%, 50% 8%
		);
	}
	5% {
		clip-path: polygon(
			0% 29%, 44% 29%, 44% 83%, 94% 83%, 94% 56%, 11% 56%, 11% 64%, 94% 64%, 
			94% 70%, 88% 70%, 88% 32%, 18% 32%, 18% 96%, 10% 96%, 10% 62%, 9% 62%, 
			9% 84%, 68% 84%, 68% 50%, 52% 50%, 52% 55%, 35% 55%, 35% 87%, 25% 87%, 
			25% 39%, 15% 39%, 15% 88%, 52% 88%
		);
	}
	30% {
		clip-path: polygon(
			0% 53%, 93% 53%, 93% 62%, 68% 62%, 68% 37%, 97% 37%, 97% 89%, 13% 89%, 
			13% 45%, 51% 45%, 51% 88%, 17% 88%, 17% 54%, 81% 54%, 81% 75%, 79% 75%, 
			79% 76%, 38% 76%, 38% 28%, 61% 28%, 61% 12%, 55% 12%, 55% 62%, 68% 62%, 
			68% 51%, 0% 51%, 0% 92%, 63% 92%, 63% 4%, 65% 4%
		);
	}
	45% {
		clip-path: polygon(
			0% 33%, 2% 33%, 2% 69%, 58% 69%, 58% 94%, 55% 94%, 55% 25%, 33% 25%, 
			33% 85%, 16% 85%, 16% 19%, 5% 19%, 5% 20%, 79% 20%, 79% 96%, 93% 96%, 
			93% 50%, 5% 50%, 5% 74%, 55% 74%, 55% 57%, 96% 57%, 96% 59%, 87% 59%, 
			87% 65%, 82% 65%, 82% 39%, 63% 39%, 63% 92%, 4% 92%
		);
	}
	1%, 7%, 33%, 47%, 78%, 93% {
		clip-path: none;
	}
}

@keyframes glitch-opacity {
	0% { opacity: 0.1; }
	5% { opacity: 0.7; }
	30% { opacity: 0.4; }
	45% { opacity: 0.6; }
	76% { opacity: 0.4; }
	90% { opacity: 0.8; }
	1%, 7%, 33%, 47%, 78%, 93% { opacity: 0; }
}

@keyframes glitch-movement {
	0% { top: 0px; left: -1px; }
	15% { top: 1px; left: 1px; }
	60% { top: 0px; left: -1px; }
	75% { top: -1px; left: 2px; }
	100% { top: 1px; left: 0px; }
}

@keyframes glitch-font {
	0% { font-weight: 400; color: #ff8c42; filter: blur(1px); }
	20% { font-weight: 600; color: #ffab66; filter: blur(0); }
	50% { font-weight: 300; color: #1bc7fb; filter: blur(1px); }
	60% { font-weight: 700; color: #ff8c42; filter: blur(0); }
	90% { font-weight: 500; color: #ffab66; filter: blur(2px); }
}

/* Smooth transition for font changes */
.content-text {
	transition: opacity 300ms ease-in-out;
}

/* Use monospace font and red color during glitching */
.content-text.glitching {
	font-family: 'JetBrains Mono', 'Courier New', monospace;
	font-size: 0.9em;
	letter-spacing: 0.02em;
	color: #ff8c42;
	filter: drop-shadow(0 1px 3px);
}

/* Intermediate state during font transition */
.content-text.transitioning {
	opacity: 0;
}